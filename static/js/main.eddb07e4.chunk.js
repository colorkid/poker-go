(this["webpackJsonppoker-go"]=this["webpackJsonppoker-go"]||[]).push([[0],{151:function(e,t,n){"use strict";n.r(t);var a,c=n(7),r=n(0),s=n(27),i=n.n(s),o=n(194),l=n(193),u=n(198),j=n(199),d=n(188),b=n(8),f=n(195),m=n(196),h=Object(d.a)({root:{display:"flex",flexDirection:"column",alignItems:"flex-end"},textField:{marginTop:16,marginBottom:8},nickname:{display:"flex",alignItems:"flex-end",width:"100%",marginTop:16},nicknameField:{marginRight:8}}),g=function(e){var t=e.pushMessage,n=e.setNickName,a=e.nickName,s=Object(r.useState)(""),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(""),j=Object(b.a)(u,2),d=j[0],g=j[1],O=h(),p=function(){d.length&&(t(d),g(""))};return Object(c.jsxs)("div",{className:O.root,children:[!a.length&&Object(c.jsxs)("div",{className:O.nickname,children:[Object(c.jsx)(f.a,{variant:"standard",label:"Write a nickname",className:O.nicknameField,onChange:function(e){l(e.target.value)}}),Object(c.jsx)(m.a,{variant:"outlined",color:"primary",onClick:function(){n(o)},disabled:!o.length,children:"Save"})]}),Object(c.jsx)(f.a,{fullWidth:!0,multiline:!0,rows:2,label:"Write a message",className:O.textField,onChange:function(e){g(e.target.value)},value:d,onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),p())}}),Object(c.jsx)(m.a,{variant:"contained",color:"primary",disabled:!a.length,onClick:function(){p()},children:"Sent"})]})},O=n(44),p=Object(d.a)({message:{display:"flex"},name:{fontWeight:500,paddingRight:4}}),x=function(e){var t=e.author,n=void 0===t?"George":t,a=e.message,r=p();return Object(c.jsxs)("div",{className:r.message,children:[Object(c.jsx)("div",{className:r.name,children:"".concat(n,":")}),Object(c.jsx)("div",{children:a})]})},v=Object(r.memo)(x),k=Object(d.a)({root:{borderWidth:1,borderStyle:"solid",borderColor:"rgba(0, 0, 0, 0.23)",borderRadius:4,minHeight:200,maxHeight:200,padding:16,overflowY:"auto"}}),N=function(e){var t=e.allMessages,n=Object(r.useRef)(null),a=k();return Object(r.useEffect)((function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[t]),Object(c.jsx)("div",{className:a.root,ref:n,children:!!t.length&&t.map((function(e,t){return Object(c.jsx)(v,{author:e.author,message:e.message},t)}))})},y=function(e){return e.chat.allMessages},w=function(){var e=Object(O.c)(y);return Object(c.jsx)(N,{allMessages:e})},S=n(200),M=n(201),C=function(e){var t=e.pushMessage,n=e.setNickName,a=e.nickName;return Object(c.jsx)(S.a,{children:Object(c.jsxs)(M.a,{p:2,children:[Object(c.jsx)(w,{}),Object(c.jsx)(g,{pushMessage:t,setNickName:n,nickName:a})]})})},E=n(103),F=n.n(E),W=n(197),J=function(e){(a=new W.a).webSocketFactory=function(){return new F.a("https://poker-api.r2ls.ru/ws")},a.activate(),a.onConnect=function(){a.subscribe("/topic/chat",(function(t){e(JSON.parse(t.body))}))}},R=function(e){a.publish({destination:"/app/message",body:JSON.stringify(e)})},T=function(){a.deactivate()},G=n(36),H=n.n(G),A=n(104),D=n(20),I="GET_MESSAGE",q=function(e){return{type:I,payload:e}},B={allMessages:[]},K=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],a=t[1],s=Object(O.b)();Object(r.useEffect)((function(){return s(function(){var e=Object(A.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J((function(e){return t(q(e))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){return T()}}),[]);return Object(c.jsx)(C,{pushMessage:function(e){R({author:n,message:e})},setNickName:a,nickName:n})},P=Object(d.a)({root:{}}),Y=function(){var e=P();return Object(c.jsx)(j.a,{maxWidth:"sm",className:e.root,children:Object(c.jsx)(M.a,{p:2,children:Object(c.jsx)(K,{})})})},_=n(106),z=n(65),L=Object(_.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:z.a.A400},background:{default:"#f5f5f5"}}}),Q=n(46),U=n(105),V=Object(Q.c)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{allMessages:[].concat(Object(D.a)(e.allMessages),[t.payload])};default:return e}}}),X=Object(Q.d)(V,Object(Q.a)(U.a));i.a.render(Object(c.jsx)(l.a,{injectFirst:!0,children:Object(c.jsxs)(u.a,{theme:L,children:[Object(c.jsx)(o.a,{}),Object(c.jsx)(O.a,{store:X,children:Object(c.jsx)(Y,{})}),","]})}),document.querySelector("#root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.eddb07e4.chunk.js.map